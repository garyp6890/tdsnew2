{{ 'collection-header.css' | asset_url | stylesheet_tag }}

{% liquid
  assign text_alignment = section.settings.text_alignment
  assign bg_image = section.settings.bg_image
  assign layout = section.settings.layout
  assign enable_parallax = false
  assign show_breadcrumb = true
  if layout == 'without_breadcrumb'
    assign show_breadcrumb = false
  endif

  for block in section.blocks
    assign selected_collection = collections[block.settings.collection]
    if selected_collection.handle == collection.handle
      assign bg_image = block.settings.image
    endif
  endfor

  assign custom_class = ''
  if bg_image == blank
    assign custom_class = ' m-collection-page-header--no-image'
  endif

  assign animation_effect = settings.animations
  assign animated = false
  if animation_effect != 'none'
    assign animated = true
  endif

  assign text_color = section.settings.text_color
  assign heading_color = ''
  assign subtitle_color = 'm:text-color-subtext'
  if text_color != 'inherit'
    assign heading_color = 'm:text-' | append: text_color
    assign subtitle_color = 'm:text-' | append: text_color
  endif

  assign container = section.settings.container
  if container == 'w-full'
    assign container = 'container-full'
  endif
%}

<div class="m-collection-page-header {{ custom_class }}" data-section-type="collection-header" data-section-id="{{ section.id }}">
  <div class="{{ container }}">
    <div class="m-collection-page-header__wrapper m:overflow-hidden">
      {% if show_breadcrumb and layout == 'inside' %}
        {% render 'breadcrumb', container: '', animated: animated, animation_effect: animation_effect %}
      {% endif %}
      
      <!-- ✅ H1: Collection Title or Custom H1 -->
      <h1 class="m-collection-page-header__title h2 {{ heading_color }}{% if animated %} m-scroll-trigger animate--{{ animation_effect }}{% endif %}">
        {% if section.settings.custom_h1 != blank %}
          {{ section.settings.custom_h1 }}
        {% else %}
          {{ collection.title }}
        {% endif %}
      </h1>

      <!-- ✅ H3 Subtitle (if provided) -->
      {% if section.settings.custom_subtitle != blank %}
        <p class=" {{ subtitle_color }}">
          {{ section.settings.custom_subtitle }}
        </p>
      {% endif %}
    </div>
  </div>
</div>

{% if layout == 'outside_no_border' or layout == 'outside' and show_breadcrumb %}
  <div class="m-collection-page__breadcrumb" data-layout="{{ layout }}">
    {% render 'breadcrumb', container: container, animated: animated, animation_effect: animation_effect %}
  </div>
{% endif %}

{% schema %}
{
  "name": "breadcameee",
  "class": "breadcameee",
  "settings": [
    {
      "type": "text",
      "id": "custom_h1",
      "label": "Custom Collection Page H1",
      "default": "Your Custom H1 Here"
    },
    {
      "type": "text",
      "id": "custom_subtitle",
      "label": "Custom Subtitle (H3)",
      "default": "Your Subtitle Here"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme"
    },
    {
      "type": "select",
      "id": "container",
      "label": "Container type",
      "default": "container",
      "options": [
        {
          "value": "container-fluid",
          "label": "Default"
        },
        {
          "value": "w-full",
          "label": "Full width"
        },
        {
          "value": "container",
          "label": "Use container box"
        }
      ]
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Breadcrumb Layout",
      "default": "outside",
      "options": [
        {
          "value": "outside",
          "label": "Breadcrumb outside"
        },
        {
          "value": "inside",
          "label": "Breadcrumb inside"
        },
        {
          "value": "without_breadcrumb",
          "label": "Without breadcrumb"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "breadcameee"
    }
  ]
}
{% endschema %}
